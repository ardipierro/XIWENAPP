{
  "metadata": {
    "bookId": "ADE1_2026_enriched",
    "title": "Aula de Espa√±ol 1 - Edici√≥n Interactiva Porte√±a",
    "description": "Libro de espa√±ol rioplatense con ejercicios interactivos, audio y actividades gamificadas",
    "language": "es-AR",
    "targetLanguage": "zh-CN",
    "cefrLevel": "A1-A2",
    "version": "1.0.0",
    "createdAt": "2025-11-08",
    "features": {
      "interactiveExercises": true,
      "audioPlayback": true,
      "darkMode": true,
      "offlineMode": true,
      "progressTracking": true,
      "adaptiveSpeed": true
    },
    "author": "XIWEN - Transformado con IA"
  },

  "globalSettings": {
    "theme": {
      "type": "string",
      "options": ["light", "dark", "auto"],
      "default": "light",
      "storageKey": "xiwen_theme_preference"
    },
    "audioSpeed": {
      "type": "number",
      "min": 0.5,
      "max": 1.5,
      "step": 0.25,
      "default": 1.0,
      "storageKey": "xiwen_audio_speed"
    },
    "fontSize": {
      "type": "number",
      "min": 14,
      "max": 24,
      "step": 2,
      "default": 16,
      "storageKey": "xiwen_font_size"
    },
    "subtitles": {
      "type": "boolean",
      "default": true,
      "storageKey": "xiwen_subtitles_enabled"
    },
    "viewMode": {
      "type": "string",
      "options": ["scroll", "tabs", "slides"],
      "default": "scroll",
      "storageKey": "xiwen_view_mode"
    }
  },

  "units": [
    {
      "unitId": "unit_255",
      "unitNumber": 255,
      "title": "Di√°logo en un Restaurante",
      "type": "interactive_dialogue",
      "cefrLevel": "A2",
      "tags": ["restaurante", "comida", "pedido", "conversaci√≥n"],
      "estimatedDuration": 15,

      "content": {
        "introduction": {
          "type": "text",
          "text": "Sof√≠a y Andr√©s van a un restaurante. Escuch√° atentamente el di√°logo y despu√©s vas a poder practicar.",
          "audioUrl": "/audio/unit255/intro_rioplatense.mp3",
          "audioTranscript": "Sof√≠a y Andr√©s van a un restaurante. Escuch√° atentamente el di√°logo y despu√©s vas a poder practicar."
        },

        "dialogue": {
          "type": "interactive_dialogue",
          "dialogueId": "restaurant_conversation_1",
          "characters": [
            {
              "id": "mozo",
              "name": "Mozo",
              "avatar": "/avatars/waiter_male.svg",
              "voice": "es-AR-male-1"
            },
            {
              "id": "sofia",
              "name": "Sof√≠a",
              "avatar": "/avatars/sofia.svg",
              "voice": "es-AR-female-1"
            },
            {
              "id": "andres",
              "name": "Andr√©s",
              "avatar": "/avatars/andres.svg",
              "voice": "es-AR-male-2"
            }
          ],

          "lines": [
            {
              "lineId": "dl1",
              "character": "mozo",
              "text": "Buenas noches. ¬øTienen reserva?",
              "translation": "Êôö‰∏äÂ•Ω„ÄÇ‰Ω†‰ª¨ÊúâÈ¢ÑËÆ¢Âêó?",
              "audioUrl": "/audio/unit255/line1_mozo.mp3",
              "timestamp": 0,
              "notes": [
                {
                  "word": "reserva",
                  "definition": "Acci√≥n de guardar un lugar con anticipaci√≥n",
                  "example": "Hicimos una reserva para cuatro personas"
                }
              ]
            },
            {
              "lineId": "dl2",
              "character": "sofia",
              "text": "S√≠, a nombre de Sof√≠a Torres.",
              "translation": "ÊòØÁöÑÔºå‰ª•Á¥¢Ëè≤‰∫ö¬∑ÊâòÈõ∑ÊñØÁöÑÂêçÂ≠ó„ÄÇ",
              "audioUrl": "/audio/unit255/line2_sofia.mp3",
              "timestamp": 3.5,
              "interactiveType": "fill_in_blank",
              "exercise": {
                "type": "fill_in_blank",
                "exerciseId": "ex255_1",
                "prompt": "Complet√° la frase del di√°logo:",
                "sentence": "S√≠, a nombre de _____.",
                "blanks": [
                  {
                    "position": 0,
                    "correctAnswers": ["Sof√≠a Torres", "Sofia Torres"],
                    "hint": "El nombre completo de la persona que hizo la reserva",
                    "points": 10
                  }
                ],
                "feedback": {
                  "correct": "¬°Genial! En Argentina se dice 'a nombre de' para indicar la reserva.",
                  "incorrect": "Prob√° de nuevo. Pens√° en el nombre completo de Sof√≠a."
                }
              }
            },
            {
              "lineId": "dl3",
              "character": "mozo",
              "text": "Ah, s√≠. Por ac√°, por favor.",
              "translation": "ÂïäÔºåÊòØÁöÑ„ÄÇËøôËæπËØ∑„ÄÇ",
              "audioUrl": "/audio/unit255/line3_mozo.mp3",
              "timestamp": 7.2,
              "notes": [
                {
                  "word": "Por ac√°",
                  "definition": "Expresi√≥n porte√±a para 'por aqu√≠' o 'this way'",
                  "rioplatenseNote": "En Buenos Aires decimos 'por ac√°' en lugar de 'por aqu√≠'",
                  "example": "Venite por ac√° que te muestro algo"
                }
              ]
            },
            {
              "lineId": "dl4",
              "character": "sofia",
              "text": "Gracias. La mesa est√° re linda.",
              "translation": "Ë∞¢Ë∞¢„ÄÇÊ°åÂ≠êÂæàÊºÇ‰∫Æ„ÄÇ",
              "audioUrl": "/audio/unit255/line4_sofia.mp3",
              "timestamp": 10.8,
              "notes": [
                {
                  "word": "re linda",
                  "definition": "Muy bonita (intensificador porte√±o)",
                  "rioplatenseNote": "En rioplatense usamos 'RE' como intensificador: re lindo, re bueno, re copado",
                  "example": "Esa pel√≠cula est√° re buena"
                }
              ],
              "interactiveType": "multiple_choice",
              "exercise": {
                "type": "multiple_choice",
                "exerciseId": "ex255_2",
                "prompt": "¬øQu√© significa 'RE linda' en porte√±o?",
                "options": [
                  {
                    "id": "a",
                    "text": "Un poco linda",
                    "isCorrect": false
                  },
                  {
                    "id": "b",
                    "text": "Muy linda",
                    "isCorrect": true
                  },
                  {
                    "id": "c",
                    "text": "No tan linda",
                    "isCorrect": false
                  },
                  {
                    "id": "d",
                    "text": "Linda otra vez",
                    "isCorrect": false
                  }
                ],
                "correctAnswer": "b",
                "explanation": "'RE' es un intensificador muy usado en Buenos Aires que significa 'muy'. Otros ejemplos: re copado, re zarpado, re groso.",
                "points": 15
              }
            },
            {
              "lineId": "dl5",
              "character": "mozo",
              "text": "Ac√° tienen el men√∫. ¬øQuieren tomar algo mientras deciden?",
              "translation": "ËøôÊòØËèúÂçï„ÄÇÊÇ®ÊÉ≥ËæπÂÜ≥ÂÆöËæπÂñùÁÇπ‰ªÄ‰πàÂêó?",
              "audioUrl": "/audio/unit255/line5_mozo.mp3",
              "timestamp": 15.5,
              "notes": [
                {
                  "word": "Ac√°",
                  "definition": "Aqu√≠ (forma porte√±a)",
                  "rioplatenseNote": "Siempre decimos 'ac√°' en lugar de 'aqu√≠'",
                  "example": "Ven√≠ para ac√°"
                }
              ]
            },
            {
              "lineId": "dl6",
              "character": "andres",
              "text": "S√≠, para m√≠, un jugo de naranja, porfa.",
              "translation": "ÊòØÁöÑÔºåËØ∑ÁªôÊàë‰∏ÄÊùØÊ©ôÊ±Å„ÄÇ",
              "audioUrl": "/audio/unit255/line6_andres.mp3",
              "timestamp": 20.3,
              "notes": [
                {
                  "word": "porfa",
                  "definition": "Por favor (versi√≥n coloquial)",
                  "rioplatenseNote": "Los porte√±os decimos 'porfa' de forma informal",
                  "example": "Pasame la sal, porfa"
                }
              ]
            },
            {
              "lineId": "dl7",
              "character": "sofia",
              "text": "Y para m√≠, una botella de agua mineral.",
              "translation": "ÊàëË¶Å‰∏ÄÁì∂ÁüøÊ≥âÊ∞¥„ÄÇ",
              "audioUrl": "/audio/unit255/line7_sofia.mp3",
              "timestamp": 24.8
            },
            {
              "lineId": "dl8",
              "character": "mozo",
              "text": "Enseguida se los traigo.",
              "translation": "ÊàëÈ©¨‰∏äÁªôÊÇ®ÊãøÊù•„ÄÇ",
              "audioUrl": "/audio/unit255/line8_mozo.mp3",
              "timestamp": 28.2,
              "interactiveType": "audio_comprehension",
              "exercise": {
                "type": "audio_comprehension",
                "exerciseId": "ex255_3",
                "prompt": "Escuch√° el audio y escrib√≠ lo que dice el mozo:",
                "audioUrl": "/audio/unit255/line8_mozo.mp3",
                "correctAnswers": [
                  "Enseguida se los traigo",
                  "Enseguida se los traigo.",
                  "enseguida se los traigo"
                ],
                "hint": "Empieza con 'Enseguida...'",
                "allowedAttempts": 3,
                "speedControl": true,
                "points": 20
              }
            }
          ],

          "fullAudioUrl": "/audio/unit255/dialogue_complete.mp3",
          "totalDuration": 32
        },

        "exercises": [
          {
            "type": "vocabulary_matching",
            "exerciseId": "ex255_vocab",
            "title": "Vocabulario del Restaurante",
            "instructions": "Arrastr√° las palabras en espa√±ol a su traducci√≥n en chino",
            "difficulty": "beginner",
            "points": 50,
            "pairs": [
              {
                "id": "p1",
                "spanish": "Mozo / Camarero",
                "chinese": "ÊúçÂä°Âëò",
                "image": "/images/vocab/waiter.jpg",
                "audioUrl": "/audio/vocab/mozo.mp3",
                "rioplatenseNote": "En Argentina decimos MOZO, no camarero"
              },
              {
                "id": "p2",
                "spanish": "Reserva",
                "chinese": "È¢ÑËÆ¢",
                "image": "/images/vocab/reservation.jpg",
                "audioUrl": "/audio/vocab/reserva.mp3"
              },
              {
                "id": "p3",
                "spanish": "Mesa",
                "chinese": "Ê°åÂ≠ê",
                "image": "/images/vocab/table.jpg",
                "audioUrl": "/audio/vocab/mesa.mp3"
              },
              {
                "id": "p4",
                "spanish": "Men√∫ / Carta",
                "chinese": "ËèúÂçï",
                "image": "/images/vocab/menu.jpg",
                "audioUrl": "/audio/vocab/menu.mp3"
              },
              {
                "id": "p5",
                "spanish": "Jugo",
                "chinese": "ÊûúÊ±Å",
                "image": "/images/vocab/juice.jpg",
                "audioUrl": "/audio/vocab/jugo.mp3",
                "rioplatenseNote": "Decimos JUGO, no zumo"
              },
              {
                "id": "p6",
                "spanish": "Agua mineral",
                "chinese": "ÁüøÊ≥âÊ∞¥",
                "image": "/images/vocab/water.jpg",
                "audioUrl": "/audio/vocab/agua.mp3"
              }
            ],
            "feedback": {
              "allCorrect": "¬°B√°rbaro! Ya conoc√©s todo el vocabulario del restaurante.",
              "someCorrect": "Bien, pero revis√° las que te quedaron. Dale otra oportunidad.",
              "noneCorrect": "No te preocupes, che. Escuch√° los audios y prob√° de nuevo."
            }
          },

          {
            "type": "conjugation_fill_blank",
            "exerciseId": "ex255_conjugation",
            "title": "Conjugaci√≥n: Presente de Indicativo",
            "instructions": "Complet√° las frases con la conjugaci√≥n correcta del verbo",
            "difficulty": "intermediate",
            "points": 40,
            "questions": [
              {
                "id": "q1",
                "sentence": "¬øUstedes _____ (tener) reserva?",
                "verb": "tener",
                "correctAnswers": ["tienen"],
                "hint": "Recuerda que 'ustedes' se conjuga como 'ellos'",
                "audioExample": "/audio/conjugation/tienen.mp3",
                "points": 10
              },
              {
                "id": "q2",
                "sentence": "Nosotros _____ (querer) pedir ahora.",
                "verb": "querer",
                "correctAnswers": ["queremos"],
                "hint": "Es un verbo irregular en primera persona plural",
                "audioExample": "/audio/conjugation/queremos.mp3",
                "points": 10
              },
              {
                "id": "q3",
                "sentence": "Yo _____ (pedir) un jugo de naranja.",
                "verb": "pedir",
                "correctAnswers": ["pido"],
                "hint": "En porte√±o: 'Yo pido...'",
                "audioExample": "/audio/conjugation/pido.mp3",
                "rioplatenseNote": "Usamos el pronombre 'yo' menos que en Espa√±a",
                "points": 10
              },
              {
                "id": "q4",
                "sentence": "Vos _____ (ir) a tomar vino?",
                "verb": "ir",
                "correctAnswers": ["vas", "vas a"],
                "hint": "Con VOS, no T√ö",
                "audioExample": "/audio/conjugation/vas_vos.mp3",
                "rioplatenseNote": "En Argentina usamos VOS: vos vas, vos ten√©s, vos com√©s",
                "points": 10
              }
            ]
          },

          {
            "type": "role_play_creator",
            "exerciseId": "ex255_roleplay",
            "title": "Cre√° tu Propio Di√°logo",
            "instructions": "Imagin√° que est√°s en un restaurante porte√±o. Escrib√≠ tu propio pedido usando las frases que aprendiste.",
            "difficulty": "advanced",
            "points": 60,
            "prompts": [
              "¬øQu√© le dir√≠as al mozo cuando lleg√°s?",
              "¬øQu√© bebida vas a pedir?",
              "¬øQu√© comida te gustar√≠a ordenar?",
              "¬øC√≥mo le pedir√≠as la cuenta?"
            ],
            "examplePhrases": [
              "Hola, ¬øtienen mesa para dos?",
              "¬øMe tra√©s la carta, porfa?",
              "Para m√≠, un vaso de agua, porfa",
              "Quiero pedir el bife de chorizo",
              "¬øMe tra√©s la cuenta cuando puedas?",
              "¬øCu√°nto sale todo?"
            ],
            "rioplatenseGuidelines": {
              "useTu": false,
              "useVos": true,
              "useUstedes": true,
              "avoidSpanishisms": [
                "vale ‚Üí dale",
                "tomar el autob√∫s ‚Üí tomar el bondi/colectivo",
                "ordenar ‚Üí pedir",
                "zumo ‚Üí jugo"
              ]
            },
            "evaluationCriteria": [
              "Uso correcto del voseo",
              "Vocabulario porte√±o apropiado",
              "Frases naturales en contexto de restaurante",
              "Conjugaciones correctas"
            ]
          }
        ],

        "culturalNotes": {
          "title": "Cultura Porte√±a: Comer Afuera",
          "icon": "üá¶üá∑",
          "content": [
            {
              "topic": "El Mozo",
              "text": "En Argentina siempre decimos 'mozo', nunca 'camarero' o 'mesero'. Y cuando quer√©s llamarlo, le dec√≠s '¬°Disculp√°!' o levant√°s la mano.",
              "image": "/images/culture/mozo_argentina.jpg"
            },
            {
              "topic": "La Propina",
              "text": "En Buenos Aires se deja propina del 10%. No es obligatoria pero es de buena educaci√≥n. Pod√©s decirle al mozo: 'Quedate con el vuelto' o 'Esto es para vos'.",
              "image": "/images/culture/propina.jpg"
            },
            {
              "topic": "Horarios",
              "text": "Los porte√±os cenamos tarde: entre las 21:00 y 23:00 hs. Si vas a las 19:00, el restaurante puede estar vac√≠o.",
              "image": "/images/culture/dinner_time.jpg"
            },
            {
              "topic": "Expresiones √ötiles",
              "text": "- 'Porfa' = por favor\n- 'Re' = muy (re bueno, re lindo)\n- 'Ac√°' = aqu√≠\n- '¬øCu√°nto sale?' = ¬øCu√°nto cuesta?\n- 'Dale' = OK / de acuerdo",
              "audioUrl": "/audio/culture/expresiones_utiles.mp3"
            }
          ]
        }
      },

      "sessionState": {
        "storageType": "localStorage",
        "storageKey": "xiwen_unit255_state",
        "schema": {
          "completed": "boolean",
          "startedAt": "timestamp",
          "completedAt": "timestamp",
          "dialogueProgress": {
            "listenedLines": "array",
            "completedExercises": "array",
            "notes": "array"
          },
          "exerciseResults": {
            "ex255_1": {
              "attempts": "number",
              "correct": "boolean",
              "points": "number",
              "timestamp": "timestamp"
            },
            "ex255_2": {
              "attempts": "number",
              "selectedAnswer": "string",
              "correct": "boolean",
              "points": "number",
              "timestamp": "timestamp"
            },
            "ex255_vocab": {
              "matchedPairs": "array",
              "attempts": "number",
              "timeSpent": "number",
              "points": "number",
              "timestamp": "timestamp"
            },
            "ex255_conjugation": {
              "answers": "object",
              "correct": "number",
              "total": "number",
              "points": "number",
              "timestamp": "timestamp"
            },
            "ex255_roleplay": {
              "dialogue": "array",
              "feedback": "object",
              "points": "number",
              "timestamp": "timestamp"
            }
          },
          "highlights": "array",
          "personalNotes": "array",
          "audioPlaybackSettings": {
            "speed": "number",
            "subtitlesEnabled": "boolean"
          },
          "totalPoints": "number",
          "totalTimeSpent": "number"
        }
      }
    },

    {
      "unitId": "unit_256",
      "unitNumber": 256,
      "title": "Di√°logo en un Restaurante - Parte 2",
      "type": "interactive_dialogue",
      "cefrLevel": "A2",
      "tags": ["restaurante", "comida", "men√∫", "conversaci√≥n"],
      "estimatedDuration": 12,

      "content": {
        "introduction": {
          "type": "text",
          "text": "Ahora Sof√≠a y Andr√©s est√°n mirando el men√∫. Escuch√° c√≥mo piden la comida.",
          "audioUrl": "/audio/unit256/intro.mp3"
        },

        "dialogue": {
          "type": "interactive_dialogue",
          "dialogueId": "restaurant_conversation_2",
          "characters": [
            {
              "id": "mozo",
              "name": "Mozo",
              "avatar": "/avatars/waiter_male.svg",
              "voice": "es-AR-male-1"
            },
            {
              "id": "sofia",
              "name": "Sof√≠a",
              "avatar": "/avatars/sofia.svg",
              "voice": "es-AR-female-1"
            },
            {
              "id": "andres",
              "name": "Andr√©s",
              "avatar": "/avatars/andres.svg",
              "voice": "es-AR-male-2"
            }
          ],

          "lines": [
            {
              "lineId": "dl1",
              "character": "sofia",
              "text": "(Mirando el men√∫) ¬øQu√© vas a pedir, Andr√©s?",
              "translation": "(ÁúãÁùÄËèúÂçï) ÂÆâÂæ∑ÁÉàÊñØÔºå‰Ω†Ë¶ÅÁÇπ‰ªÄ‰πà?",
              "audioUrl": "/audio/unit256/line1_sofia.mp3",
              "timestamp": 0,
              "interactiveType": "voseo_practice",
              "exercise": {
                "type": "fill_in_blank",
                "exerciseId": "ex256_voseo_1",
                "prompt": "Convert√≠ esta pregunta a la forma VOSeante correcta:",
                "original": "¬øQu√© VAS a pedir? (vos)",
                "sentence": "¬øQu√© _____ a pedir, Andr√©s?",
                "correctAnswers": ["vas"],
                "explanation": "Con VOS usamos: vos VAS (no 'vas a ir' sino 'vas'). Otros: vos ten√©s, vos com√©s, vos sab√©s.",
                "audioExample": "/audio/voseo/vas.mp3",
                "points": 10
              }
            },
            {
              "lineId": "dl2",
              "character": "andres",
              "text": "Creo que el salm√≥n. Y vos, ¬øqu√© vas a comer?",
              "translation": "ÊàëÊÉ≥Ë¶Å‰∏âÊñáÈ±º„ÄÇ‰Ω†Âë¢Ôºå‰Ω†Ë¶ÅÂêÉ‰ªÄ‰πà?",
              "audioUrl": "/audio/unit256/line2_andres.mp3",
              "timestamp": 4.2,
              "notes": [
                {
                  "word": "Y vos",
                  "definition": "Y t√∫ (forma rioplatense)",
                  "rioplatenseNote": "SIEMPRE usamos VOS, nunca T√ö en Argentina",
                  "examples": [
                    "¬øY vos c√≥mo est√°s?",
                    "Vos sab√©s mucho",
                    "¬øVos quer√©s venir?"
                  ]
                }
              ]
            },
            {
              "lineId": "dl3",
              "character": "sofia",
              "text": "Yo quiero la sopa de tomate y despu√©s la pasta con queso.",
              "translation": "ÊàëÊÉ≥Ë¶ÅÁï™ËåÑÊ±§ÔºåÁÑ∂ÂêéË¶ÅÂ•∂ÈÖ™ÊÑèÈù¢„ÄÇ",
              "audioUrl": "/audio/unit256/line3_sofia.mp3",
              "timestamp": 8.5
            },
            {
              "lineId": "dl4",
              "character": "mozo",
              "text": "(Volviendo) Ac√° tienen las bebidas. ¬øYa saben qu√© van a pedir?",
              "translation": "(ÂõûÊù•) ËøôÊòØÊÇ®ÁöÑÈ•ÆÊñô„ÄÇ‰Ω†‰ª¨Áü•ÈÅìË¶ÅÁÇπ‰ªÄ‰πà‰∫ÜÂêó?",
              "audioUrl": "/audio/unit256/line4_mozo.mp3",
              "timestamp": 13.8
            },
            {
              "lineId": "dl5",
              "character": "sofia",
              "text": "S√≠, yo quiero la sopa de tomate y la pasta con queso.",
              "translation": "ÊòØÁöÑÔºåÊàëË¶ÅÁï™ËåÑÊ±§ÂíåÂ•∂ÈÖ™ÊÑèÈù¢„ÄÇ",
              "audioUrl": "/audio/unit256/line5_sofia.mp3",
              "timestamp": 18.2,
              "interactiveType": "ordering_practice",
              "exercise": {
                "type": "role_play_input",
                "exerciseId": "ex256_order",
                "prompt": "Ahora vos: ¬øC√≥mo pedir√≠as tu comida favorita?",
                "exampleStructures": [
                  "Yo quiero + [comida]",
                  "Para m√≠, + [comida]",
                  "Me tra√©s + [comida] + porfa?"
                ],
                "vocabulary": [
                  "bife de chorizo",
                  "milanesa con papas fritas",
                  "ensalada mixta",
                  "pizza de muzzarella",
                  "empanadas de carne"
                ],
                "feedback": {
                  "checkVoseo": true,
                  "checkVocabulary": true,
                  "checkPoliteness": true
                },
                "points": 25
              }
            },
            {
              "lineId": "dl6",
              "character": "andres",
              "text": "Y yo, el salm√≥n, porfa.",
              "translation": "ÊàëË¶Å‰∏âÊñáÈ±ºÔºåË∞¢Ë∞¢„ÄÇ",
              "audioUrl": "/audio/unit256/line6_andres.mp3",
              "timestamp": 22.4
            },
            {
              "lineId": "dl7",
              "character": "mozo",
              "text": "Perfecto. En un toque les traigo los platos. ¬°Buen provecho!",
              "translation": "Â•ΩÁöÑ„ÄÇÊàëÈ©¨‰∏äÁªôÊÇ®ÊãøÊù•Ëèú„ÄÇÁ•ùÊÇ®Áî®È§êÊÑâÂø´!",
              "audioUrl": "/audio/unit256/line7_mozo.mp3",
              "timestamp": 25.8,
              "notes": [
                {
                  "word": "En un toque",
                  "definition": "En un momento / r√°pidamente",
                  "rioplatenseNote": "Expresi√≥n s√∫per porte√±a para decir 'enseguida' o 'en un momento'",
                  "examples": [
                    "Ya te lo traigo en un toque",
                    "Esperame un toque",
                    "En un toque arranco"
                  ],
                  "audioUrl": "/audio/expressions/en_un_toque.mp3"
                }
              ]
            }
          ],

          "fullAudioUrl": "/audio/unit256/dialogue_complete.mp3",
          "totalDuration": 30
        },

        "exercises": [
          {
            "type": "listening_comprehension",
            "exerciseId": "ex256_listening",
            "title": "Comprensi√≥n Auditiva",
            "instructions": "Escuch√° el di√°logo completo y respond√© las preguntas",
            "audioUrl": "/audio/unit256/dialogue_complete.mp3",
            "speedControl": true,
            "subtitlesToggle": true,
            "points": 40,
            "questions": [
              {
                "id": "q1",
                "question": "¬øQu√© va a pedir Andr√©s?",
                "type": "multiple_choice",
                "options": [
                  {"id": "a", "text": "La pasta con queso", "isCorrect": false},
                  {"id": "b", "text": "El salm√≥n", "isCorrect": true},
                  {"id": "c", "text": "La sopa de tomate", "isCorrect": false},
                  {"id": "d", "text": "La ensalada", "isCorrect": false}
                ],
                "audioTimestamp": 4.2,
                "points": 10
              },
              {
                "id": "q2",
                "question": "¬øQu√© dice el mozo al final?",
                "type": "multiple_choice",
                "options": [
                  {"id": "a", "text": "Enseguida se los traigo", "isCorrect": false},
                  {"id": "b", "text": "En un toque les traigo los platos", "isCorrect": true},
                  {"id": "c", "text": "Ya vuelvo con su pedido", "isCorrect": false},
                  {"id": "d", "text": "Un momento por favor", "isCorrect": false}
                ],
                "audioTimestamp": 25.8,
                "rioplatenseNote": "'En un toque' es MUY argentino",
                "points": 10
              },
              {
                "id": "q3",
                "question": "Complet√°: Sof√≠a quiere la sopa de tomate y despu√©s _____.",
                "type": "fill_in_blank",
                "correctAnswers": ["la pasta con queso", "pasta con queso"],
                "audioTimestamp": 8.5,
                "points": 10
              },
              {
                "id": "q4",
                "question": "¬øC√≥mo le pregunta Sof√≠a a Andr√©s qu√© va a pedir?",
                "type": "fill_in_blank",
                "correctAnswers": ["¬øQu√© vas a pedir?", "Qu√© vas a pedir", "que vas a pedir"],
                "hint": "Record√° usar VOS",
                "audioTimestamp": 0,
                "points": 10
              }
            ]
          },

          {
            "type": "drag_and_drop_menu",
            "exerciseId": "ex256_menu_creation",
            "title": "Arm√° tu Men√∫ Porte√±o",
            "instructions": "Arrastr√° los platos a la categor√≠a correcta del men√∫",
            "difficulty": "intermediate",
            "points": 50,
            "categories": [
              {
                "id": "entradas",
                "name": "Entradas",
                "translation": "ÂºÄËÉÉËèú"
              },
              {
                "id": "platos_principales",
                "name": "Platos Principales",
                "translation": "‰∏ªËèú"
              },
              {
                "id": "postres",
                "name": "Postres",
                "translation": "ÁîúÁÇπ"
              },
              {
                "id": "bebidas",
                "name": "Bebidas",
                "translation": "È•ÆÊñô"
              }
            ],
            "items": [
              {
                "id": "i1",
                "name": "Empanadas",
                "category": "entradas",
                "image": "/images/food/empanadas.jpg",
                "audioUrl": "/audio/food/empanadas.mp3",
                "info": "Plato t√≠pico argentino - masa rellena de carne, pollo o verduras"
              },
              {
                "id": "i2",
                "name": "Bife de chorizo",
                "category": "platos_principales",
                "image": "/images/food/bife.jpg",
                "audioUrl": "/audio/food/bife.mp3",
                "info": "El corte de carne m√°s famoso en Argentina"
              },
              {
                "id": "i3",
                "name": "Milanesa con papas fritas",
                "category": "platos_principales",
                "image": "/images/food/milanesa.jpg",
                "audioUrl": "/audio/food/milanesa.mp3",
                "info": "Carne empanada y frita, con papas fritas"
              },
              {
                "id": "i4",
                "name": "Flan con dulce de leche",
                "category": "postres",
                "image": "/images/food/flan.jpg",
                "audioUrl": "/audio/food/flan.mp3",
                "info": "Postre cl√°sico argentino"
              },
              {
                "id": "i5",
                "name": "Fernet con Coca",
                "category": "bebidas",
                "image": "/images/drinks/fernet.jpg",
                "audioUrl": "/audio/drinks/fernet.mp3",
                "info": "Bebida t√≠pica de C√≥rdoba, muy popular en todo el pa√≠s"
              },
              {
                "id": "i6",
                "name": "Vino Malbec",
                "category": "bebidas",
                "image": "/images/drinks/malbec.jpg",
                "audioUrl": "/audio/drinks/malbec.mp3",
                "info": "Vino argentino por excelencia"
              },
              {
                "id": "i7",
                "name": "Provoleta",
                "category": "entradas",
                "image": "/images/food/provoleta.jpg",
                "audioUrl": "/audio/food/provoleta.mp3",
                "info": "Queso provolone a la parrilla con or√©gano"
              },
              {
                "id": "i8",
                "name": "Ensalada mixta",
                "category": "entradas",
                "image": "/images/food/ensalada.jpg",
                "audioUrl": "/audio/food/ensalada.mp3",
                "info": "Lechuga, tomate, cebolla"
              },
              {
                "id": "i9",
                "name": "Helado",
                "category": "postres",
                "image": "/images/food/helado.jpg",
                "audioUrl": "/audio/food/helado.mp3",
                "info": "Argentina tiene el mejor helado del mundo"
              },
              {
                "id": "i10",
                "name": "Salm√≥n",
                "category": "platos_principales",
                "image": "/images/food/salmon.jpg",
                "audioUrl": "/audio/food/salmon.mp3",
                "info": "Como en el di√°logo"
              }
            ],
            "feedback": {
              "allCorrect": "¬°Genial! Ahora sab√©s armar un men√∫ porte√±o de primera.",
              "someCorrect": "Bien, pero revis√° algunas categor√≠as.",
              "noneCorrect": "No pasa nada, che. Escuch√° los audios y prob√° de nuevo."
            }
          }
        ],

        "culturalNotes": {
          "title": "Expresiones Porte√±as del Restaurante",
          "icon": "üçΩÔ∏è",
          "content": [
            {
              "topic": "En un toque",
              "text": "Significa 'en un momento' o 'r√°pido'. Super usado en Buenos Aires: 'Ya te lo traigo en un toque', 'Esperame un toque'.",
              "audioUrl": "/audio/culture/en_un_toque.mp3"
            },
            {
              "topic": "Porfa",
              "text": "Versi√≥n corta de 'por favor'. Es informal pero s√∫per com√∫n: 'Pasame la sal, porfa', 'Un caf√©, porfa'.",
              "audioUrl": "/audio/culture/porfa.mp3"
            },
            {
              "topic": "La Cuenta",
              "text": "Para pedir la cuenta pod√©s decir: '¬øMe tra√©s la cuenta, porfa?', '¬øCu√°nto sale?', '¬øCu√°nto es?'. Y para dejar propina: 'Quedate con el vuelto'.",
              "audioUrl": "/audio/culture/cuenta.mp3"
            }
          ]
        }
      },

      "sessionState": {
        "storageType": "localStorage",
        "storageKey": "xiwen_unit256_state",
        "schema": {
          "completed": "boolean",
          "dialogueProgress": {
            "listenedLines": "array",
            "completedExercises": "array"
          },
          "exerciseResults": {
            "ex256_voseo_1": {
              "attempts": "number",
              "correct": "boolean",
              "points": "number"
            },
            "ex256_order": {
              "userInput": "string",
              "feedback": "object",
              "points": "number"
            },
            "ex256_listening": {
              "answers": "object",
              "correct": "number",
              "points": "number"
            },
            "ex256_menu_creation": {
              "placements": "array",
              "attempts": "number",
              "points": "number"
            }
          },
          "totalPoints": "number",
          "totalTimeSpent": "number"
        }
      }
    }
  ],

  "progressTracking": {
    "storageType": "IndexedDB",
    "databaseName": "xiwen_ade1_progress",
    "schema": {
      "userId": "string",
      "bookProgress": {
        "completedUnits": "array",
        "currentUnit": "number",
        "totalPoints": "number",
        "totalTimeSpent": "number",
        "lastAccessed": "timestamp"
      },
      "unitProgress": {
        "[unitId]": {
          "completed": "boolean",
          "points": "number",
          "timeSpent": "number",
          "exercises": "object",
          "highlights": "array",
          "notes": "array"
        }
      },
      "userPreferences": {
        "theme": "string",
        "audioSpeed": "number",
        "fontSize": "number",
        "subtitles": "boolean",
        "viewMode": "string"
      },
      "achievements": "array",
      "statistics": {
        "totalExercisesCompleted": "number",
        "averageScore": "number",
        "streakDays": "number",
        "lastStudyDate": "timestamp"
      }
    }
  }
}
